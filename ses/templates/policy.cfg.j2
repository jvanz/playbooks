# Cluster assignment
cluster-ceph/cluster/*.sls
# Hardware Profile
profile-default/cluster/*.sls
profile-default/stack/default/ceph/minions/*yml
# Common configuration
config/stack/default/global.yml
config/stack/default/ceph/cluster.yml
# Role assignment
{% for item in hostvars %}
{% if "ceph_role" in hostvars[item] %}
{% if "master" in hostvars[item].ceph_role %}
role-master/cluster/{{ hostvars[item].ansible_facts.fqdn }}.sls
{% endif %}
{% if "mon" in hostvars[item].ceph_role %}
role-mon/cluster/{{ hostvars[item].ansible_facts.fqdn }}.sls
{% endif %}
{% if "mgr" in hostvars[item].ceph_role %}
role-mgr/cluster/{{ hostvars[item].ansible_facts.fqdn }}.sls
{% endif %}
{% if "igw" in hostvars[item].ceph_role %}
role-igw/cluster/{{ hostvars[item].ansible_facts.fqdn }}.sls
{% endif %}
{% endif %}
{% endfor %}
